# 原型和原型链

## 原型（Prototype）

### 定义

在 JavaScript 中，每个函数都有一个`prototype`属性，这个属性是一个对象，它包含了可以由实例共享的属性和方法。当使用`new`关键字创建一个新对象时，这个新对象的内部将包含一个指向其构造函数的`prototype`属性的引用，称为`__proto__`。

### 特点

-   原型是对象的模板，用于共享属性和方法。
-   原型属性是可写的，这意味着可以在实例上添加或修改原型属性。
-   原型可以继承其他对象的属性和方法。

## 原型链（Prototype Chain）

### 定义

原型链是一个由对象的原型组成的链式结构。当访问一个对象的属性或方法时，如果该对象本身没有这个属性或方法，JavaScript 引擎会沿着原型链向上查找，直到找到该属性或方法或者到达原型链的末端

### 特点

-   原型链是由`__proto__`属性链接起来的，这个属性指向了对象的原型。
-   原型链的末端是`Object.prototype`，它有一个`__proto__`属性指向`null`，表示链的结束。
-   原型链允许对象访问其原型以及原型的原型上的属性和方法。
-   原型链查找是单向的，从实例到原型，直到`null`。

### 原型链查找

当访问一个对象的属性时，JavaScript 引擎会首先在对象自身上查找该属性。如果找不到，它会沿着`__proto__`链向上查找，直到找到该属性或到达原型链的末端。这个过程称为“原型链查找”。

## 与 Class 比较

-   `class`是 ES6 引入的
-   `class`  提供了更清晰的语法结构，使得代码更易于阅读和维护
-   `class` 支持原生私有字段，原型继承需要通过某种手段实现，如闭包等。

> 通常使用 Object.getPrototypeOf，而不是用**proto**，因为
>
> 1.  在一些旧的浏览器和环境中**proto**是非标准的
> 2.  ECMAScript 标准正在逐步淘汰  `__proto__`，转而推荐使用  `Object.getPrototypeOf()`  和  `Object.setPrototypeOf()`  等标准方法

# 浏览器输入连接后发生了什么

1. **解析 URL**：浏览器首先解析输入的 URL，确定协议（如 HTTP 或 HTTPS）、域名、路径、查询参数等。
2. **DNS 查询**：浏览器需要将域名解析为 IP 地址。这通常通过 DNS（域名系统）完成。如果浏览器缓存中已有域名对应的 IP 地址，则直接使用，否则会向 DNS 服务器发起查询。
3. **建立 TCP 连接**（如果使用 HTTP/1.1 或 HTTP/2）：浏览器与目标服务器建立 TCP 连接。这涉及一个称为"三次握手"的过程，确保连接的可靠性。
4. **发送 HTTP 请求**：一旦 TCP 连接建立，浏览器会构造一个 HTTP 请求，包括请求行（方法、URL、HTTP 版本）、请求头（如 Host、User-Agent、Accept 等）和请求体（如果有）。
5. **服务器响应**：服务器接收到请求后，会处理请求并返回一个 HTTP 响应。这包括状态行（HTTP 版本、状态码、状态信息）、响应头和响应体。
6. **处理响应**：浏览器接收到响应后，会根据状态码进行相应处理。如果是 200 OK，浏览器会解析响应体中的内容。如果是重定向状态码（如 301 或 302），浏览器会根据响应头中的 Location 字段重新发起请求。
7. **渲染页面**：浏览器开始解析 HTML 文档，构建 DOM 树。同时，CSS 样式和 JavaScript 脚本也会被加载和执行，以完成页面的渲染。
8. **加载资源**：页面中的图片、视频、音频等资源也会被加载。浏览器可能会并行加载多个资源以提高效率。
9. **页面交互**：页面加载完成后，用户可以与页面进行交互，如点击链接、填写表单等。
10. **关闭连接**：在 HTTP/1.1 中，如果使用了 Connection: close 头部，连接会在传输完成后关闭。在 HTTP/2 中，连接可以复用，多个请求可以在同一连接上并行传输。

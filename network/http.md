## HTTP 和 HTTPS 区别

HTTPS 其实就是建构在 SSL/TLS 之上的 HTTP 协议

-   **安全性**
    -   HTTP：明文传输，不加密。数据在传输过程中可能会被截获或修改
    -   HTTPS：通过 SSL/TLS 协议对数据进行加密，防止数据被窃听后篡改
-   **端口**
    -   HTTP：80
    -   HTTPS：443
-   **证书**
    -   HTTP：不需要证书
    -   HTTPS：需要从 CA（证书颁发机构）获取 SSL 证书，并部署到服务器上
-   **性能**
    -   HTTP：没有加密和解密过程，通常性能比 HTTPS 高
    -   HTTPS：需要加密解密，需要消耗资源计算，性能会有所下降（现代 HTTPS 已经优化，差异不是很大）
-   **SEO（搜索引擎优化）**
    -   HTTP：搜索引擎可能会对使用 HTTP 的网站进行降权处理
    -   HTTPS：搜索引擎认为其更安全，会获得更好的排名
-   **浏览器标记**
    -   HTTP：现代浏览器会标记为“不安全”
    -   HTTPS：会显示锁，表示是安全的

## HTTP1 / HTTP2 / HTTP3

### HTTP/1.0

-   引入了协议版本信息。
-   状态码的标准化，使得客户端可以了解请求成功或失败。
-   引入了 HTTP 头部的概念，允许传输元数据。
-   支持多种类型的文档传输，通过`Content-Type`头部实现。
-   支持基本的请求方法，如 GET 和 POST。

#### 总结

1. 每次请求都需要建立一个新的 TCP 连接，连接**不能复用**，效率较低。

### HTTP/1.1

默认情况下，浏览器对同一域名下的**并发请求数量**有限制，通常为 6-8 个

-   **持久连接（keep-alive）**：默认情况下，TCP 连接在请求后保持打开状态，可以被用来发送多个请求。
-   **管线化技术**：允许在第一个响应被完全发送之前发送第二个请求。
-   **响应分块**：支持以块的方式传输响应体，特别是对于动态生成的内容。
-   **缓存控制**：引入了新的缓存控制头部，如`Cache-Control`。
-   **内容协商**：通过头部如`Accept-Language`和`Content-Encoding`等支持内容的国际化和压缩。
-   **Host 头部**：支持虚拟主机，允许一个服务器拥有多个域名。

#### 总结

1. **持久连接**（keep-alive）：一定程度上减少了连接建立和关闭的次数，但它仍然是按照请求的顺序依次处理，无法在一个连接上同时处理多个请求
2. **请求管道化**：允许在同一个 TCP 上连续发送多个 HTTP，但是可能导致队头阻塞的问题。
3. **并发请求**：同域名下允许 6-8 个并发请求
4. **缓存控制**：新增 `Catch-Control` 响应头

### HTTP/2

通常情况下，同源请求（同一个域名）**并发请求**可以达到 100 个以上

-   **二进制协议**：采用二进制分帧传输，通过头信息压缩、多路复用等技术，大大提高了传输效率。
-   **多路复用**：允许在单个 TCP 连接上并行传输多个请求和响应，消除了队头阻塞。
-   **头部压缩**：使用 HPACK 算法压缩请求和响应头部，减少冗余头部信息的传输。
-   **服务器推送**：服务器可以主动向客户端推送资源。
-   **流的优先级和流量控制**：允许客户端和服务器指定请求的优先级。
-   **安全性**：虽然 HTTP/2 本身不强制加密，但主流实现通常在 HTTPS 上运行。

#### 总结

1. **传输效率**：采用**二进制分帧传输**提高传输效率，**头部压缩**减少头部大小
2. **并发请求**：可以达到 100 个请求并发
3. **服务器推送**：可以主动向客户端推送资源
4. **多路复用**：可以在一个 TCP 连接上同时处理多个请求和响应，**彼此互不干扰**（解决了队头阻塞问题）
5. **指定优先级**：允许客户端和服务端指定请求优先级

并发请求太少的解决办法：

-   使用**HTTP/2**
-   **域名分片**：将请求拆分到不同的子域中

HTTP/2 支持无限制的并发请求（理论上，可能会受浏览器限制），因此如果使用了 HTTP/2 就没有必要再用域名分片；域名分片每个域名都需要单独进行**DNS 解析**和**TCP 链接**，额外的开销比较大

### HTTP/3

HTTP 3.0 也称作 HTTP over ，其核心是 QUIC（读音 quick）协议

-   **基于 QUIC 协议**：使用 QUIC 协议作为传输层，基于 UDP。
-   **0-RTT 连接建立**：允许快速恢复连接，减少连接建立时间。
-   **多路复用**：在 QUIC 层面上实现，每个数据流独立传输，无队头阻塞。
-   **前向纠错（FEC）**：支持数据的自我修复，提高传输可靠性。
-   **更好的安全性**：QUIC 内置了 TLS 1.3 加密，所有数据流默认加密。
-   **连接迁移**：允许连接在不同网络环境下无缝迁移，如移动设备切换 Wi-Fi 和蜂窝数据。

#### 总结

1. QUIC 协议（基于 UDP）：减少了 TCP 三次握手时间

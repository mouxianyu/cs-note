# CSS 选择器优先级

## 基本选择器

1. 通配选择器 `*`
2. 元素选择器 `span`
3. 类选择器 `.class`
4. ID 选择器 `#id`
5. 属性选择器 `[attr]` `[attr=value]` `[attr~=value]` `[attr|=value]` `[attr^=value]` `[attr$=value]` `[attr*=value]`

## 分组选择器（Grouping Selector）

`A, B`

`,` 是将不同的选择器组合在一起的方法，它选择所有能被列表中的任意一个选择器选中的节点。

## 组合器（Combinator）

1. 后代组合器
    - 空格
    - 选择前一个元素的后代节点
2. 直接子代组合器
    - `>`
    - 选择前一个元素的直接子代的节点
3. 一般兄弟组合器
    - `~`
    - 选择兄弟元素，也就是说，后一个节点在前一个节点后面的任意位置，并且共享同一个父节点
4. 紧邻兄弟组合器
    - `+`
    - 选择相邻元素，即后一个元素紧跟在前一个之后，并且共享同一个父节点
5. 列组合器（**实验性技术**： 现在没有浏览器支持）
    - `||`
    - 选择具有相同父元素的元素，并且这些元素位于同一列中。（用在 grid、table 等中）
    - 例子：`col || td` 会匹配所有 `<col>` 作用域内的 `<td> `元素。

## 伪选择器（Pseudo）

1. 伪类
    - `:`
    - 伪选择器支持按照未被包含在文档树中的状态信息来选择元素
    - `:hover`
2. 伪元素
    - `::`
    - 伪选择器用于表示无法用 HTML 语义表达的实体
    - `::before`

## 优先级

1. 内联样式 > **A**(ID 选择器) > **B**(类选择器｜属性选择器｜伪类) > **C**(元素选择器｜伪元素选择器)
2. 按照 A、B、C 的数量和顺序来排优先级（类似奥运金牌排名），如果相同，则按照在 css 文档上面的先后顺序排，后面的优先级高于前面的（只考虑数量和顺序，不考虑 DOM 数元素的层级距离）
3. `!important` 优先级最高，如果都有 `!important` 就按照普通方式判断优先级
4. 通配选择器（`*`）、组合器（`空格` , `>` , `+` , `~` , `||`）对优先级没有影响（`*` 可以当成最低优先级）

> `#foo` 的优先级比 `[id="foo"]` 优先级大，虽然表示的是同一个内容，但是 ID 选择器的优先级比较大

## 例外规则

1. `:not()` 优先级按照括号中的内容分开计算
2. `:is()` 括号中的所有内容都会按照它们的最高优先级计算
3. `:where()` 本身及括号中的内容都不参与优先级计算

-   `div:not(.outer) p` 和 `div.outer p` 优先级相同（没有合并升级的情况）
-   `p :not(strong, .strong)` 相当于 `p :not(strong)` 和 `p :not(.strong)` 优先级会分开计算
-   `ul :is(li, ol)` 和 `ul li` 、 `ul ol` 优先级相同
-   `ul :is(li, ol, .red)` 的优先级以 `.red` 计算，大于 `ul li` 、 `ul ol` 的优先级（合并升级）
-   `ul li:where(.normal)` 和 `ul li ` 的优先级相同

### :is() (需要考虑兼容)

#### 简化代码

允许你将多个选择器组合在一起，使得你可以写出更简洁和更可维护的 CSS 代码。**主要用于简化代码，提高可读性**

```css
/* 第一层设置红色 */
ul li,
ul ol {
    color: red;
}

/* 第二层设置黄色 */
ul li li,
ul li ol,
ul ol li,
ul ol ol {
    color: yellow;
}
```

可以简化成

```css
/* 第一层设置红色 */
ul :is(li, ol) {
    color: red;
}

/* 第二层设置黄色 */
ul :is(li, ol) :is(li, ol) {
    color: yellow;
}
```

#### 优先级合并，以最高优先级计算

`:is(tagname, .class)` 的优先级是按照整个扣号包含的最高优先级的选择器计算的，如：

-   `:is(li, ol, .red)` 会将整个 `:is()` 按照优先级最高 `.red` 计算，也就是`li`、`ol` 提升到了和 `.red` 同级别

### :where() (需要考虑兼容)

`:where()` 的作用与 `:is()` 相同，只不过 `:where()` 不参与优先级计算，总是为 0，如：

-   `ul li:where(.normal)` 和 `ul li ` 的优先级相同
